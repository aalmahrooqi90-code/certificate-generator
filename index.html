<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>مولد الشهادات الذكي</title>
<link href='https://fonts.googleapis.com/css2?family=Amiri&display=swap' rel='stylesheet'>
<style>
    body { font-family: 'Amiri', serif; text-align: center; margin: 20px; background-color: #f9f9f9; }
    h1 { color: #333; }
    #certificateCanvas { border: 1px solid #ccc; margin-top: 20px; max-width: 100%; height: auto; }
    input { padding: 10px; font-size: 18px; margin-top: 10px; width: 80%; max-width: 300px; }
    button { padding: 10px 20px; font-size: 18px; margin-top: 10px; cursor: pointer; background-color: #4CAF50; color: white; border: none; border-radius: 5px; }
    button:hover { background-color: #45a049; }
</style>
</head>
<body>
<h1>أدخل اسمك للحصول على الشهادة</h1>
<input type="text" id="nameInput" placeholder="اكتب اسمك هنا">
<br>
<button onclick="generateCertificate()">إنشاء الشهادة</button>
<canvas id="certificateCanvas" width="800" height="600"></canvas>
<br>
<button onclick="downloadCertificate()">تحميل الشهادة</button>

<script>
const canvas = document.getElementById('certificateCanvas');
const ctx = canvas.getContext('2d');

// ✅ البحث عن الصورة تلقائيًا (JPG أو PNG)
let img = new Image();
let possibleImages = ['certificate-template.jpg', 'certificate-template.png'];
let foundImage = null;

for (let i = 0; i < possibleImages.length; i++) {
    let xhr = new XMLHttpRequest();
    xhr.open('HEAD', possibleImages[i], false);
    xhr.send();
    if (xhr.status === 200) {
        foundImage = possibleImages[i];
        break;
    }
}

if (foundImage) {
    img.src = foundImage;
} else {
    alert('لم يتم العثور على صورة الشهادة! تأكد من رفعها باسم certificate-template.jpg أو certificate-template.png');
}

// إعدادات النص (يمكنك تعديلها هنا)
const fontFamily = 'Amiri';
const fontSize = 48; // حجم الخط
const fontColor = '#2c3e50'; // لون النص
const textYPosition = canvas.height / 2; // مكان النص عموديًا

img.onload = () => {
    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
};

function generateCertificate() {
    if (!foundImage) {
        alert('لا يمكن إنشاء الشهادة لأن الصورة غير موجودة');
        return;
    }
    const name = document.getElementById('nameInput').value.trim();
    if (name === '') {
        alert('يرجى إدخال الاسم أولاً');
        return;
    }
    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
    ctx.font = fontSize + 'px ' + fontFamily;
    ctx.fillStyle = fontColor;
    ctx.textAlign = 'center';
    ctx.fillText(name, canvas.width / 2, textYPosition);
}

function downloadCertificate() {
    if (!foundImage) {
        alert('لا يمكن تحميل الشهادة لأن الصورة غير موجودة');
        return;
    }
    const link = document.createElement('a');
    link.download = 'certificate.png';
    link.href = canvas.toDataURL();
    link.click();
}
</script>
</body>
</html>
